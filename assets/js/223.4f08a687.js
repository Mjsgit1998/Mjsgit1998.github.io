(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{530:function(e,t,r){"use strict";r.r(t);var s=r(7),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"文本划词高亮效果并标注"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文本划词高亮效果并标注"}},[e._v("#")]),e._v(" 文本划词高亮效果并标注")]),e._v(" "),t("p",[e._v("之前开发工作遇到了这个需求，大概要求就是给一段文字展示在页面上，可以用鼠标把文字进行框选并添加上底色，就像小时候用荧光笔做标记那样。还有一个需求是给框选的文字添加标注。")]),e._v(" "),t("p",[e._v("找了很久最终找了 git 上面的这个库进行开发，记录一下：")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/alienzhou/web-highlighter/blob/master/README.zh_CN.md#%E6%9B%B4%E5%A4%9A%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[e._v("git 链接"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("web highlighter，一个可以在任何网页上做高亮笔记的前端库，支持高亮文本的持久化存储和还原。「web-highlighter」仓库的目标就是帮助你在任意的网页上快速地实现高亮笔记功能（例如博客网页、文档阅读器、在线图书等）。它包含了文本高亮笔记与高亮持久化下场景的核心能力，并且支持通过它简单易用的 API 来实现你自己的产品需求。")]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[e._v("npm i web"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("highlighter\n")])])]),t("div",{staticClass:"language-j's extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("import Highlighter from 'web-highlighter';\n\n// 不高亮 pre&code 元素\nconst highlighter = new Highlighter({\n    exceptSelectors: ['pre', 'code']\n});\n\n// 添加一些交互监听\nhighlighter\n    .on('selection:hover', ({id}) => {\n        // 通过添加 class，实现类似 hover 效果\n        highlighter.addClass('highlight-wrap-hover', id);\n    })\n    .on('selection:hover-out', ({id}) => {\n        // 鼠标离开时清除悬停样式\n        highlighter.removeClass('highlight-wrap-hover', id);\n    })\n    .on('selection:create', ({sources}) => {\n        sources = sources.map(hs => ({hs}));\n        // 存储\n        store.save(sources);\n    });\n\n// 获取数据存储，将高亮区域还原展示在网页上\nstore.getAll().forEach(\n    ({hs}) => highlighter.fromStore(hs.startMeta, hs.endMeta, hs.text, hs.id)\n);\n\nhighlighter.run()\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);